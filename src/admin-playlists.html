<!DOCTYPE html>
<html lang="zh-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>歌单管理页面</title>
    <link rel="stylesheet" href="./css/default.css">
</head>

<body>
    <div class="page">
        <aside>
            <div class="newMusic">
            </div>
            <div id="musicList-container">
            </div>
            <div class="uploadArea">
                <div id="uploadContainer" class="draggable">
                    <div id="uploadButton" class="clickable">
                        <span>点击或拖曳上传</span>
                        <p>文件大小不能超过 20MB</p>
                    </div>
                </div>
            </div>
        </aside>
        <main>
            <div class="playlistForm-wrapper">
                <h1>创建歌单</h1>
                <form class="playlistForm" action="">
                    <div class="row">
                        <label>
                            歌单名
                            <input type="text" name="name">
                        </label>

                    </div>
                    <div class="row">
                        <label>
                            描述
                            <textarea name="summary"></textarea>
                        </label>
                    </div>
                    <div class="row">
                        <button type="submit">创建</button>
                    </div>
                </form>
            </div>
        </main>
    </div>
    <div id="siteLoading" class="site-loading"></div>
    <script src="./../node_modules/leancloud-storage/dist/av-min.js"></script>
    <script src="./js/initializers/av.js"></script>
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../vendors/moxie.js"></script>
    <script src="../node_modules/plupload/js/plupload.min.js"></script>
    <script src="../node_modules/qiniu-js/dist/qiniu.min.js"></script>
    <script src="./js/admin/event-hub.js"></script>
    <script>
        {
            let view = {
                el: '.playlistForm-wrapper',
                init() {
                    this.$el = $(this.el)
                    this.$form = this.$el.find('form')
                }

            }
            let model = {
                create(data) {
                    $.post()
                }
            }
            let controller = {
                init(view, model) {
                    this.view = view
                    this.view.init()
                    this.model = model
                    this.bindEvents()
                },
                bindEvents() {
                    this.view.$el.on('submit', 'form', (e) => {
                        e.preventDefault()
                        let form = this.view.$form.get(0)
                        console.log(form.name.value);
                        console.log(form.summary.value)
                    })
                }
            }
            controller.init(view, model)
        }

        /* var Song = AV.Object.extend('Song')
        var song = new Song()
        song.set('name', '2222')


        var Playlist = AV.Object.extend('Playlist')
        var playlist = new Playlist()
        playlist.set('name', '测试标题22')
        playlist.set('summary', "测试简介222")

        song.set('dependent', playlist) // Song属于一个歌单

        song.save().then(
            newSong => {
                let { id, attributes } = newSong
                Object.assign(this.data, {
                    id: id,
                    ...attributes

                    /* name: attributes.name,
                    artist: attributes.artist,
                    url: attributes.url */
          /*       })
            },
            error => {
                // 异常处理
                console.error(error.message)
            }
        ) */
        /*  playlist.save().then(newPlaylist => {
            console.log(newPlaylist)
        }, error => {
            console.error(error)
        }) */
    </script>
</body>

</html>